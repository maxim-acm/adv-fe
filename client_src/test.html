<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>test html</title>
    <script src="libs/jquery/dist/jquery.min.js"></script>
    <script src="data.js"></script>
    <script src="libs/lodash/lodash.js"></script>
    <script src="libs/handlebars/handlebars.js"></script>
    <link rel="stylesheet" href="../client_build/static/styles.css">
  </head>
  <body>
    <div class="task">
        <div class="json"></div>
        <div class="table"></div>
    </div>
  </body>

  <script id="json-template" type="ext/html-handlebars-template">
    {{~json posts}}
  </script>

  <script id="table-template" type="text/x-handlebars-template">
      {{#table posts}}
          {{~description}}
      {{/table}}
  </script>

  <script>

  var tableTamplate = Handlebars.compile( $("#table-template").html() );

  Handlebars.registerHelper('table', function(items, options){
      var out = "";

      for (var i = 0; i < items.length; i++) {

        i%2 == 0 ?
            out += '<div class="table-row__black">' + options.fn(items[i])+'</div>' :
                out += '<div class="table-row__white">' + options.fn(items[i])+'</div>'
      }

      return out;
  });

  $('.table').html(tableTamplate({
    posts: Data.getPosts()
  }))

  var jsonTemplate = Handlebars.compile( $('#json-template').html() );

  Handlebars.registerHelper('json', function(obj) {
    return JSON.stringify(obj, null, 8);
  })

  $('.json').html(jsonTemplate({
    posts: Data.getPosts()
  }))

  </script>

</html>
